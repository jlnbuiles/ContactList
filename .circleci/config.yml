# version: 2.1
# jobs:
#   build:
#     docker:
#       - image: cimg/node:17.2.0 # the primary container, where your job's commands are run
#         auth:
#           username: mydockerhub-user
#           password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
#     steps:
#       - checkout # check out the code in the project directory
#       - run: echo "hello world" # run the `echo` command
      # - run:
      #   name: Install pod dependencies
        # command: pod install --verbose
# jobs:
#   build-and-test:
#     macos:
#       xcode: 12.5.1
#     steps:
#       - checkout # check out the code in the project directory
#       - run: echo "hello world" # run the `echo` command
#       - run:
#         name: Install pod dependencies
#         command: pod install --verbose
  # test:
  #   macos:
  #     xcode: 12.5.1
  #   steps:
  #     - checkout
  #     - run: fastlane scan
  # deploy:
  #   macos:
  #     xcode: 12.5.1
  #   steps:
  #     - checkout
  #     - run:
  #         name: Deploy
  #         command: fastlane release_appstore

# workflows:
#   test_release:
#     jobs:
#       - test
#       - deploy:
#           requires:
#             test
#           filters:
#             branches:
#               only: release



version: 2.1

jobs: # a basic unit of work in a run
  build:
    macos:
      xcode: 12.5.1 # indicate your selected version of Xcode
    steps:
      - checkout
      - run:
          # build our application
          name: Build Application
          command: xcodebuild -allowProvisioningUpdates
      - run:
          # compress Xcode's build output so that it can be stored as an artifact
          name: Compress app for storage
          command: zip -r app.zip build/Release/circleci-demo-macos.app
      - store_artifacts: # store this build output. Read more: https://circleci.com/docs/2.0/artifacts/
          path: app.zip
          destination: app

workflows:
  version: 2
  test_build:
    jobs:
      - build
        # requires:
        #   test